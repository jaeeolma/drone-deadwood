---

title: Automatic deadwood detection from RGB UAV imagery


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>drone_detector</code> was originally a python package for automatic deadwood detection or segmentation from RGB UAV imagery. It contains functions and helpers to use various GIS data with fastai and Detectron2.</p>
<p>icevision support will be added once it supports pytorch 1.11 and fastai 2.6 or newer.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Installation">Installation<a class="anchor-link" href="#Installation"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Installing the required packages is fairly tricky, because some of them are easiest to install via conda (<code>geopandas</code> and <code>GDAL</code>), some via pip (<code>pytorch</code>) and for <code>detectron2</code> it is required to specify which prebuilt package to use.</p>
<p>Repository contains two installation scripts, one for CPU environment and other for GPU environment with cudatoolkit 11.3. Install miniconda and run <code>bash -i install_cpu_env.sh</code> for CPU environment and <code>bash -i install_gpu_env.sh</code>. If you have different cudatoolkit, modify <code>pytorch</code> and <code>detectron2</code> urls.</p>
<p>Afterwards install library with <code>pip install . -e</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Running-with-Singularity">Running with Singularity<a class="anchor-link" href="#Running-with-Singularity"> </a></h3><p>Use provided <code>dronecontainer.def</code> definition file to build Singularity container. Follow instructions on <a href="https://cloud.sylabs.io/builder">https://cloud.sylabs.io/builder</a> and build the image with</p>

<pre><code>singularity build --remote dronecontainer.sif dronecontainer.def</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Training">Training<a class="anchor-link" href="#Training"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Examples need to be updated, stay tuned!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="CLI-Usage">CLI Usage<a class="anchor-link" href="#CLI-Usage"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="fastai">fastai<a class="anchor-link" href="#fastai"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="/drone_detector/engines.fastai.predict.html#predict_segmentation_fastai"><code>predict_segmentation_fastai</code></a> runs pretrained U-Net model for larger image. So far we support only models saved with <code>learner.export()</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Detectron2">Detectron2<a class="anchor-link" href="#Detectron2"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="/drone_detector/engines.detectron2.predict.html#predict_bboxes_detectron2"><code>predict_bboxes_detectron2</code></a> and <a href="/drone_detector/engines.detectron2.predict.html#predict_instance_masks_detectron2"><code>predict_instance_masks_detectron2</code></a> work identically with icevision CLI commands, but use Detectron2 instead.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Citations">Citations<a class="anchor-link" href="#Citations"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Publications-using-this-repository">Publications using this repository<a class="anchor-link" href="#Publications-using-this-repository"> </a></h2><p>Nothing so far, but soon!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Other-people's-work-applied-in-this-repository">Other people's work applied in this repository<a class="anchor-link" href="#Other-people's-work-applied-in-this-repository"> </a></h2><p>This repository contains parts from</p>
<ul>
<li><a href="https://github.com/CosmiQ/solaris">Solaris</a> by CosmiQ Works</li>
<li><a href="https://github.com/waspinator/pycococreator">pycococreator</a> by waspinator, <a href="https://doi.org/10.5281/zenodo.4627206">https://doi.org/10.5281/zenodo.4627206</a></li>
</ul>

</div>
</div>
</div>
</div>
 

